# use_frameworks!

platform :ios, '9.0'

target 'Peregrine_Example' do
  pod 'Peregrine', :path => '../'

  target 'Peregrine_Tests' do
    inherit! :search_paths

    pod 'Specta'
    pod 'Expecta'
  end
end

post_install do |installer|
  installer.pods_project.targets.each do |target|
        target.build_configurations.each do |config|
          if ['PGTestSDK'].include?(target.to_s) then
            config.build_settings['COMPILER_INDEX_STORE_ENABLE'] = 'NO'
            config.build_settings['CC'] = '${CCROOT}/bin/clang'
            config.build_settings['CCROOT'] = '${HOME}/Github/llvm_xcode/Debug'
            config.build_settings['OTHER_CFLAGS'] = '-Xclang -load -Xclang ${CCROOT}/lib/PeregrinePlugin.dylib -Xclang -add-plugin -Xclang PeregrinePlugin -Xclang -plugin-arg-PeregrinePlugin -Xclang ${PODS_ROOT}/Peregrine/Support/Peregrine.bundle'
          end
        end
    end
end
